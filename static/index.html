<!DOCTYPE html>

<html ng-app='SousChef'>
<head>
    <title>SousChef</title>
    <link rel=stylesheet href="bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.css">
    <link rel="stylesheet" href="main.css">
    <script type="text/javascript" src="bower_components/angular/angular.js"></script>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript" src="bower_components/jquery/dist/jquery.js"></script>
</head>
    
<body ng-controller="ContentController">
    
    <button class="btn btn-default" onclick="StartSpeaking(event)">Start Listening</button>
        
    <span id="result"></span>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
        function SpeakText(){

        }
        
        if (!('webkitSpeechRecognition' in window)) {
            console.log('chrome does not have the speech api')
        } else {
          var recognizing;
          var recognition = new webkitSpeechRecognition();

          recognition.continuous = true;
          recognition.interimResults = false;

          recognition.onstart = function() {console.log('Speech Recognition Commencing')}
          recognition.onresult = function(event) {    
              for (var i = event.resultIndex; i < event.results.length; ++i) {
                  if (event.results[i].isFinal) {
                    $.ajax({
                      url: 'https://api.wit.ai/message',
                      data: {
                        'q': event.results[i][0].transcript
                        'access_token' : 'SMRYKLMQBVUVUFDAPTPTXLY6H2ZM4DQU '
                      },
                      dataType: 'jsonp',
                      method: 'GET',
                      success: function(response) {
                          console.log("success!", response);
                      }
                    });
                  }
              }              
          }
          recognition.onerror = function(event) {console.log(event.error)}
          recognition.onend = function() {console.log(4);                                         }
        }

        function StartSpeaking(event){
            var msg = new SpeechSynthesisUtterance();
            msg.text = "Speak!";
            speechSynthesis.speak(msg);
            recognizing = true;
            recognition.lang = 'en-US';
            recognition.start();
        }
        
    </script>
</body>    
</html>