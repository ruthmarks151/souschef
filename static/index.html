<!DOCTYPE html>

<html ng-app='SousChef'>
<head>
    <title>SousChef</title>
    <link rel=stylesheet href="bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.css">
    <link rel="stylesheet" href="main.css">
    <script type="text/javascript" src="bower_components/angular/angular.js"></script>
    <script type="text/javascript" src="app.js"></script>
</head>

<body ng-controller="ContentController">

    <button class="btn btn-default" onclick="StartSpeaking(event)">Start Listening</button>

    <span id="result"></span>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
        function SpeakText(){
            var msg = new SpeechSynthesisUtterance();
            msg.text = "So I can get it to say things..";
            speechSynthesis.speak(msg);
        }

        if (!('webkitSpeechRecognition' in window)) {
            console.log('chrome does not have the speech api')
        } else {
          var recognizing;
          var recognition = new webkitSpeechRecognition();
          var final_transcript = '';

          recognition.continuous = false;
          recognition.interimResults = false;

          recognition.onstart = function() {console.log(1)}
          recognition.onresult = function(event) {


              for (var i = event.resultIndex; i < event.results.length; ++i) {
                  if (event.results[i].isFinal) {
                    final_transcript += event.results[i][0].transcript;
                  }
              }

              console.log(2);
              document.getElementById("result").innerHTML = final_transcript;
              console.log(final_transcript)
          }
          recognition.onerror = function(event) {console.log(event.error)}
          recognition.onend = function() {console.log(4);
                                         console.log('things said: ' + final_transcript)
                                         }
        }

        function StartSpeaking(event){
            final_transcript = '';
            recognizing = true;
            recognition.lang = 'en-US';
            recognition.start();
        }

    </script>
</body>
</html>
