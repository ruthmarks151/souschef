<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="http://saunter.org/janky.post/scripts/json2.js"></script>
    <script src="http://saunter.org/janky.post/lib/janky.post.min.js"></script>
  </head>
  <body>

    <form name="Ingredients" action="javascript:order()">
      <script>

        var api_key = "e602eb3b-e66b-41d0-930b-e8e9fb9b2c0e";
        var customer_id = "cus_KAd5ZzI0-yICtF";

        var ingredientList = ["1 Cup", "34", "adrg"];

        /*$.get("http://104.236.40.40",
        {
          intent: "ingredients"
        },
        function(ingredients){
          for(var i in ingredients) {
            if(ingredients.hasOwnProperty(i) && !isNaN(+i)) {
                ingredientList[+i] = ingredients[i];
            }
          }
        });*/

        for(i = 0; i < ingredientList.length; i++){
          document.write("<input type=\"checkbox\" value=\"" + ingredientList[i] + "\" name=\"ingredient\">" + ingredientList[i] + "<br>");
        }
      </script>
    </form>

    <button type="button" onclick="order()">Order</button>
    <script>
      function order(){
        var order = '';
        for(i = 0; i < ingredientList.length; i++){
          if(document.Ingredients.ingredient[i].checked == true){
            order += document.Ingredients.ingredient[i].value + "\n";
          }
        }
          
        janky({
          url: "http://190fe92.ngrok.com/v1/customers/cus_KAd5ZzI0-yICtF/delivery_quotes",
          method: "post",
          username: api_key,
          password: "",
          data: {
            pickup_address: "20 McAllister St, San Francisco, CA",
            dropoff_address: "101 Market St, San Francisco, CA"
          },
          success: function(fee) {
            alert(fee);
          },
          error: function() {
            console.log('there was an error');
          }
        });

      }
    </script>

  </body>
</html>
